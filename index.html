
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fan Speed vs Temperature</title>
    <script type="text/javascript" src="../d3/d3.min.js"></script>
    <style type="text/css">
      body {
        font: 13px sans-serif;
      }
      .axis path,
      .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }
      .outer {
          width: 800px;
          height: 1600px;
          overflow: auto;
      }
      .inner {
          width: 800px;
          height: 1500px;
      }

      .tooltip {
        position: absolute;
        width: 200px;
        height: 28px;
        pointer-events: none;
      }
      svg {
          display: block;
          width: 100%;
          height: 100%;
      }
    </style>
  </head>
  <body>
    <div class="outer">
    <div class="inner">
        <svg></svg>
    </div>
</div>
    <script type="text/javascript">
      var dataset = [[25, 5340], [25, 5340], [25, 5580], [25, 4860], [25, 5100], [25, 5340], [25, 5400], [25, 5100], [25, 5220], [25, 5160], [25, 5220], [25, 4800], [24, 5280], [24, 5520], [24, 5460], [24, 4860], [24, 5280], [24, 5280], [24, 5340], [24, 4860], [23, 5220], [23, 5520], [23, 5340], [23, 5220], [23, 5100], [23, 5340], [23, 5520], [23, 4860], [23, 5340], [23, 5400], [23, 5460], [23, 4920], [22, 5220], [22, 5520], [22, 5460], [22, 4980], [25, 5160], [25, 5220], [25, 5520], [25, 4800], [24, 5400], [24, 5400], [24, 5460], [24, 4980], [28, 6660], [28, 7020], [28, 7140], [28, 0], [27, 6960], [27, 7020], [27, 6720], [27, 0], [26, 6900], [26, 7080], [26, 6900], [26, 0], [26, 6480], [26, 6780], [26, 7020], [26, 0], [27, 6660], [27, 6960], [27, 6720], [27, 0], [26, 6540], [26, 6840], [26, 6780], [26, 0], [26, 6540], [26, 7080], [26, 6840], [26, 0], [26, 6840], [26, 7140], [26, 6780], [26, 0], [26, 6780], [26, 7080], [26, 6780], [26, 0], [27, 6780], [27, 7080], [27, 7020], [27, 0], [25, 6660], [25, 6960], [25, 6840], [25, 0]];

      //Width and height
      var w = 800;
      var h = 1500;
      var padding = 80;
      var xScale = d3.scale.linear()
                 .domain([d3.min(dataset, function(d) { return d[0]; })-2, 
                          d3.max(dataset, function(d) { return d[0]; })])
                 .range([padding, w - padding*(2/3)]);

      var yScale = d3.scale.linear()
                 .domain([d3.min(dataset, function(d) { return d[1]; }), d3.max(dataset, function(d) { return d[1]; })+200])
                 .range([h - padding, padding]);

      var rScale = d3.scale.linear()
                 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                 .range([2, 5]);
      var xAxis = d3.svg.axis().scale(xScale).orient("bottom");
      var yAxis = d3.svg.axis().scale(yScale).orient("left");

      var tooltip = d3.select("body").append("div")   
          .attr("class", "tooltip")               
          .style("opacity", 0);

      //Create scale functions

      var cValue = function(d) { return d[0] ;},
          color = d3.scale.category20c();
  
      //Create SVG element
      var svg = d3.select('svg')
            .append("svg")
            .append("g")
            .attr("width", w)
            .attr("height", h);

      // x-axis 
      svg.append("g")
          .attr("class", "axis")
          .attr("transform", "translate(0," + (h - padding) + ")")
          .call(xAxis)
        .append("text")
          .attr("class", "label")
          .attr("x", w-padding)
          .attr("y", padding/2)
          .style("text-anchor", "end")
          .text("Temperature");
      // y-axis
      svg.append("g")
          .attr("class", "axis")
          .attr("transform", "translate(" + padding + ",0)")
          .call(yAxis)
        .append("text")
          .attr("class", "label")
          .attr("transform", "rotate(-90)")
          .attr("x", -padding)
          .attr("y", 16)
          .style("text-anchor", "end")
          .text("Fan Speed");

      // circles
      svg.selectAll("circle")
         .data(dataset)
         .enter()
         .append("circle")
         .attr("cx", function(d) {return xScale(d[0]);})
         .attr("cy", function(d) {return yScale(d[1]);})
         .attr("r", 4)
         .style("fill", function(d) { return color(cValue(d));})
         .on("mouseover", function(d) {      
            tooltip.transition()        
                .duration(200)      
                .style("opacity", .9);      
            tooltip .html("Temperature: " + d[0] + 
                          "<br/>"  + "Fan Speed: " + d[1])  
                .style("left", (d3.event.pageX) + "px")     
                .style("top", (d3.event.pageY - 28) + "px");    
            })                  
          .on("mouseout", function(d) {       
              tooltip.transition()        
                  .duration(500)      
                  .style("opacity", 0);   
          });

    </script>
  </body>
</html>